{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,0JACAC,OAAOC,iBAAiB,OAAQH,EAAAI,oBAehBC,SAASC,cAAc,kBAC/BC,UAAUC,OAAO,iBAMzB,IAAMC,EAAUJ,SAASC,cAAc,YACjCI,EAAmBL,SAASC,cAAc,iCAC1CK,EAAWN,SAASC,cAAc,2BAClCM,EAAUP,SAASC,cAAc,yBA8BhC,SAASO,EAAoBC,GAElC,OAAOA,EACJC,KACC,SAAAC,G,IACEC,EAAED,EAAFC,GACAC,EAAMF,EAANE,OACAC,EAAKH,EAALG,MACAC,EAAYJ,EAAZI,aACAC,EAAUL,EAAVK,WACAC,EAAYN,EAAZM,aACAC,EAAUP,EAAVO,WACAC,EAAcR,EAAdQ,eACAC,EAAQT,EAARS,SACAC,EAAWV,EAAXU,YAGMC,EAsBd,SAAgCC,GAC9B,OAAIA,EAAaC,QAAU,GACL,aAGA,U,CA3BIC,CADCX,EAAMY,MAAM,KAE3BC,GAAa,EAAAC,EAAAC,SAAcR,GAC3BS,EAAkBb,EAAaS,MAAM,KAAK,GAC1CK,EAAShB,EAAaiB,QAAQ,GAC9BC,GAAc,EAAAC,EAAAC,iBAAgBtB,GACpC,OAAO,EAAAuB,EAAAC,YAAW,CAChBzB,KACAqB,cACAnB,QACAiB,SACAf,aACAc,kBACAH,aACAL,cACAJ,aACAC,iBACAC,Y,IAILkB,KAAK,G,CAjEVhC,EAASR,iBAAiB,SAI1B,WACE,IAAMyC,GAAS,EAAAC,EAAAC,MAAK,SACpBC,QAAQC,IAAI,WAAYJ,GAExB,IAAMK,EAAYL,EAAOM,KAAKC,OAAOC,QACrCL,QAAQC,IAAI,cAAeC,GACvBA,GACFvC,EAAiBH,UAAU8C,IAAI,mBAEjC5C,EAAQ6C,mBAAmB,aAAczC,EAAoBoC,G,IAZ/DrC,EAAQT,iBAAiB,SAczB,WACE,IAAMyC,GAAS,EAAAC,EAAAC,MAAK,SACpBC,QAAQC,IAAI,WAAYJ,GAExB,IAAMW,EAASX,EAAOM,KAAKC,OAAOK,KAClCT,QAAQC,IAAI,cAAeO,GACvBA,GACF7C,EAAiBH,UAAU8C,IAAI,mBAGjC5C,EAAQ6C,mBAAmB,aAAczC,EAAoB0C,G,IAvB/DE,EAAAC,KAAKC,eAAexD,iBAAiB,QAASsD,EAAAG,gB","sources":["src/js/components/my-library.js"],"sourcesContent":["import { removeGlobalLoader } from '../services/loader';\r\nwindow.addEventListener('load', removeGlobalLoader);\r\n\r\nimport { islogin } from '../services/islogin';\r\nimport { genresSearch, genresSearchBig } from '../utiles/get_geners';\r\nimport { cardMarkup } from '../services/cardMarkup';\r\n\r\nimport getPosterPath from '../utiles/get_poster_path';\r\nimport { switchBTNs } from '../services/swith-buttons';\r\nimport { STATE } from './state';\r\nimport { save, load } from '../services/library-storage';\r\nimport {\r\n  createCardMarkup,\r\n  appendCardsMarkup,\r\n} from '../services/createCardMarkup';\r\nimport { refs, createFilmModal } from '../services/modal-film';\r\nconst library = document.querySelector('.isDisabled-js');\r\nlibrary.classList.remove('isDisabled-js');\r\n\r\nimport '../components/team-modal';\r\nimport '../services/swith-buttons';\r\nimport '../services/theme';\r\n\r\nconst gallery = document.querySelector('.gallery');\r\nconst galleryLibraryBG = document.querySelector('.library_background_contsiner')\r\nconst watchBTN = document.querySelector(\"[data-action='watched']\");\r\nconst qeueBTN = document.querySelector(\"[data-action='queue']\");\r\n\r\nwatchBTN.addEventListener('click', watchHandler);\r\nqeueBTN.addEventListener('click', qeueHandler);\r\nrefs.filmCardListEl.addEventListener('click', createFilmModal);\r\n\r\nfunction watchHandler() {\r\n  const loaded = load('STATE');\r\n  console.log('loaded: ', loaded);\r\n  \r\n  const watchedMV = loaded.user.movies.watched;\r\n  console.log('watchedMV: ', watchedMV);\r\n  if (watchedMV) {\r\n    galleryLibraryBG.classList.add('visually-hidden');\r\n  }\r\n  gallery.insertAdjacentHTML('afterbegin', createbigCardMarkup(watchedMV));\r\n}\r\nfunction qeueHandler() {\r\n  const loaded = load('STATE');\r\n  console.log('loaded: ', loaded);\r\n\r\n  const qeueMV = loaded.user.movies.qeue;\r\n  console.log('watchedMV: ', qeueMV);\r\n  if (qeueMV) {\r\n    galleryLibraryBG.classList.add('visually-hidden');\r\n  }\r\n\r\n  gallery.insertAdjacentHTML('afterbegin', createbigCardMarkup(qeueMV));\r\n}\r\n\r\nexport function createbigCardMarkup(array) {\r\n  // console.log('array: ', array);\r\n  return array\r\n    .map(\r\n      ({\r\n        id,\r\n        genres,\r\n        title,\r\n        vote_average,\r\n        vote_count,\r\n        release_date,\r\n        popularity,\r\n        original_title,\r\n        overview,\r\n        poster_path,\r\n      }) => {\r\n        const stringLength = title.split('');\r\n        const classStatus = quantityLetterOfString(stringLength);\r\n        const posterPath = getPosterPath(poster_path);\r\n        const releaseFullYear = release_date.split('-')[0];\r\n        const rating = vote_average.toFixed(1);\r\n        const genreString = genresSearchBig(genres);\r\n        return cardMarkup({\r\n          id,\r\n          genreString,\r\n          title,\r\n          rating,\r\n          vote_count,\r\n          releaseFullYear,\r\n          posterPath,\r\n          classStatus,\r\n          popularity,\r\n          original_title,\r\n          overview,\r\n        });\r\n      }\r\n    )\r\n    .join('');\r\n}\r\nfunction quantityLetterOfString(stringLength) {\r\n  if (stringLength.length <= 33) {\r\n    const classStatus = 'isNoActive';\r\n    return classStatus;\r\n  } else {\r\n    const classStatus = 'isActive';\r\n    return classStatus;\r\n  }\r\n}\r\n\r\n// Тимчасово\r\n\r\nexport function bigCardMarkup({\r\n  id,\r\n  genreString,\r\n  title,\r\n  rating,\r\n  vote_count,\r\n  releaseFullYear,\r\n  posterPath,\r\n  classStatus,\r\n  popularity,\r\n  original_title,\r\n  overview,\r\n}) {\r\n  return `<li class=\"card__item\" id=\"${id}\">\r\n              <div class=\"card__container\">\r\n                <img class=\"card__image\" src=\"${posterPath}\" alt=\"Зображення постера фільму ${title}\" loading=\"lazy\"/>\r\n                <div class=\"card__wrap\">\r\n                  <div class=\"card__activator ${classStatus}\">\r\n                    <h2 class=\"card__name\">${title}</h2>\r\n                  </div>\r\n                </div>\r\n                <div class=\"card__info\">\r\n                <p class=\"card__rating\">Vote / Votes ${rating} / ${vote_count}</p>\r\n                <p class=\"card__popularity\">Popularity ${popularity}</p>\r\n                <p class=\"card__originaltitle\">Original Title ${original_title}</p>\r\n                <p class=\"card__genres\">Genre ${genreString}</p>\r\n                <p class=\"card__about\">About ${overview}</p>\r\n              </div>\r\n        </li>`;\r\n}\r\n"],"names":["$dBKLp","parcelRequire","window","addEventListener","removeGlobalLoader","document","querySelector","classList","remove","$8fa0fd7aaa9df150$var$gallery","$8fa0fd7aaa9df150$var$galleryLibraryBG","$8fa0fd7aaa9df150$var$watchBTN","$8fa0fd7aaa9df150$var$qeueBTN","$8fa0fd7aaa9df150$export$7a0a343399848f80","array","map","param","id","genres","title","vote_average","vote_count","release_date","popularity","original_title","overview","poster_path","classStatus","stringLength","length","$8fa0fd7aaa9df150$var$quantityLetterOfString","split","posterPath","$7tKzz","default","releaseFullYear","rating","toFixed","genreString","$cEgaa","genresSearchBig","$jvc3o","cardMarkup","join","loaded","$6yfxu","load","console","log","watchedMV","user","movies","watched","add","insertAdjacentHTML","qeueMV","qeue","$38PHG","refs","filmCardListEl","createFilmModal"],"version":3,"file":"library.db0c4d4a.js.map"}